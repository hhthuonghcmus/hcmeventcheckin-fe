<div class="container pt-3">
  <div class="card border-rounded">
    <p-table [value]="myTopics" stripedRow [styleClass]="'px-3'">
      <ng-template #caption>
        <div class="d-flex align-items-center justify-content-between">
          <span class="fw-bold">My Topics</span>
          <p-button
            icon="pi pi-plus-circle"
            label="New"
            [routerLink]="['/topic/create']"
          />
        </div>
      </ng-template>

      <ng-template #header>
        <tr>
          <th class="text-start">#</th>
          <th>Name</th>
          <th class="text-center">Questions</th>
          <th></th>
        </tr>
      </ng-template>

      <ng-template #body let-topic>
        <tr>
          <td class="text-start">
            {{ myTopics.indexOf(topic) + 1 }}
          </td>
          <td>
            {{ topic.name }}
          </td>
          <td class="text-center">
            {{ topic.questions.length }}
          </td>
          <td class="d-flex gap-2 justify-content-end">
            <p-button
              icon="pi pi-pencil"
              label="Edit"
              [routerLink]="['/topic/edit', topic.id]"
            />
            <p-button
              *ngIf="!topic.isOpenedForVoting"
              label="Open Vote"
              severity="success"
              (click)="openVote(myTopics.indexOf(topic))"
            />
            <p-button
              *ngIf="topic.isOpenedForVoting"
              label="Close Vote"
              severity="danger"
              (click)="closeVote(myTopics.indexOf(topic))"
            />
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
